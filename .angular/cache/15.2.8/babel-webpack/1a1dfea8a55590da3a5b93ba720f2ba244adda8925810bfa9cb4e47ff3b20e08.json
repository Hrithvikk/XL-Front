{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nfunction AudiosComponent_ng_template_0_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 13);\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵelement(7, \"img\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_0_tr_21_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const file_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.fileplay(file_r3));\n    });\n    i0.ɵɵtext(10, \"Play Song\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_0_tr_21_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.pause());\n    });\n    i0.ɵɵtext(13, \"Pause\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_0_tr_21_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const file_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.deleteSong(file_r3));\n    });\n    i0.ɵɵtext(16, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\")(18, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_0_tr_21_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const file_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.editSong(file_r3));\n    });\n    i0.ɵɵtext(19, \"Update\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const file_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(file_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(file_r3.desc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://localhost:3000/\", file_r3.image, \"\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AudiosComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1, \"Music Player\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"table\", 1)(3, \"thead\")(4, \"tr\");\n    i0.ɵɵelement(5, \"th\", 2);\n    i0.ɵɵelementStart(6, \"th\", 2);\n    i0.ɵɵtext(7, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 2);\n    i0.ɵɵtext(9, \"Desc\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 2);\n    i0.ɵɵtext(11, \"image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 2);\n    i0.ɵɵtext(13, \"Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 2);\n    i0.ɵɵtext(15, \"Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\", 2);\n    i0.ɵɵtext(17, \"Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 2);\n    i0.ɵɵtext(19, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, AudiosComponent_ng_template_0_tr_21_Template, 20, 3, \"tr\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 4)(23, \"div\")(24, \"h1\");\n    i0.ɵɵtext(25, \"Add Song\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function AudiosComponent_ng_template_0_Template_form_ngSubmit_26_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.addsong());\n    });\n    i0.ɵɵelement(27, \"input\", 6)(28, \"br\")(29, \"br\")(30, \"textarea\", 7)(31, \"br\")(32, \"br\");\n    i0.ɵɵelementStart(33, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_0_Template_input_change_33_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.selectImage($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(34, \"br\")(35, \"br\");\n    i0.ɵɵelementStart(36, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_0_Template_input_change_36_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.selectFile($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"br\")(38, \"br\");\n    i0.ɵɵelementStart(39, \"button\", 9);\n    i0.ɵɵtext(40, \"Add Song\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"button\", 10);\n    i0.ɵɵtext(42, \" Update \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(43, \"div\", 4)(44, \"div\")(45, \"h1\");\n    i0.ɵɵtext(46, \"Update Song\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function AudiosComponent_ng_template_0_Template_form_ngSubmit_47_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.updateSong());\n    });\n    i0.ɵɵelement(48, \"input\", 11)(49, \"br\")(50, \"br\")(51, \"textarea\", 12)(52, \"br\")(53, \"br\");\n    i0.ɵɵelementStart(54, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_0_Template_input_change_54_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.selectImage($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(55, \"br\")(56, \"br\");\n    i0.ɵɵelementStart(57, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_0_Template_input_change_57_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.selectFile($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(58, \"br\")(59, \"br\");\n    i0.ɵɵelementStart(60, \"button\", 9);\n    i0.ɵɵtext(61, \"Update\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.files);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.showadd);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.addForm);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.showUpdate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.showUpdate);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.updateForm);\n  }\n}\nexport class AudiosComponent {\n  constructor(formBuilder, http) {\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.files = [];\n    this.showUpdate = true;\n    this.showadd = false;\n    this.title = 'Song.mp3';\n    this.dataValue = '0';\n    //////////////////////////////////////////////////////////////////////////\n    this.audio = new Audio();\n    if (sessionStorage.getItem('userId') != null) {\n      this.userId = sessionStorage.getItem('userId');\n    } else {\n      this.userId = '0';\n    }\n  }\n  ngOnInit() {\n    this.getAudio();\n    this.addForm = this.formBuilder.group({\n      name: ['', [Validators.required]],\n      desc: ['', [Validators.required]]\n    });\n    this.updateForm = this.formBuilder.group({\n      editname: ['', [Validators.required]],\n      editdesc: ['', [Validators.required]]\n    });\n    if (sessionStorage.getItem('dataValue') != null) {\n      this.dataValue = sessionStorage.getItem('dataValue');\n    }\n    console.log(sessionStorage.getItem('dataValue'));\n    let userId = sessionStorage.getItem('userId');\n    let uaer = sessionStorage.getItem('user');\n  }\n  ////////////////////////////select file ////////////////////////\n  selectFile(event) {\n    const file = event.target.files[0];\n    this.songFile = file;\n    // console.log(\"this.songFile>>>>>>\",this.songFile)\n  }\n  ////////////////////////////select Image ////////////////////////\n  selectImage(event) {\n    const image = event.target.files[0];\n    if (image.type == 'image/jpeg') {\n      this.imageFile = image;\n      this.addimage();\n    } else {\n      this.imagePath = sessionStorage.setItem('imagePath', 'No Path');\n    }\n    console.log('this.selectImage>>>>>>', this.imageFile);\n  }\n  addimage() {\n    alert('add image');\n    const formData = new FormData();\n    formData.append('file', this.imageFile);\n    this.http.post('http://localhost:3000/test/image', formData).subscribe(res => {\n      console.log('RESSSSSSSSSS', res);\n      this.saveImage = res.path;\n      this.imagePath = sessionStorage.setItem('imagePath', res.path);\n    });\n  }\n  addsong() {\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    // formData.append('image',this.songFile)\n    if (this.addForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.addForm.value.name);\n      params = params.set('desc', this.addForm.value.desc);\n      params = params.set('image', this.saveImage);\n      params = params.set('userId', this.userId);\n      this.http.post('http://localhost:3000/test/audio?' + params, formData).subscribe(res => {\n        console.log('RESSSSSSSS>>>>>', res);\n        let path = res.song;\n        console.log('RESSSSSSSS>>>>>', path);\n        this.getAudio();\n        // src=\"\n        // this.files=[{name:res.filename,url:`http://localhost:3000/${{path}}` ,desc:\"\",image:\"\"},\n        //   {name:\"song 2\",url:\"../assets/song2.mp3\",desc:\"\",image:\"\"},\n        //   {name:\"song 3\",url:\"../assets/song3.mp3\",desc:\"\",image:\"\"},\n        //   {name:\"song 4\",url:\"../assets/song4.mp3\",desc:\"\",image:\"\"},\n        //   {name:\"song 5\",url:\"../assets/song5.mp3\",desc:\"\",image:\"\"},\n        //   {name:\"song 6\",url:\"../assets/song6.mp3\",desc:\"\",image:\"\"},\n        //   ]\n      });\n    } else {\n      console.log('Unvalid', this.addForm);\n    }\n  }\n  fileplay(file) {\n    let url = file.song;\n    this.audio.src = 'http://localhost:3000/' + url;\n    this.audio.load();\n    this.audio.play();\n  }\n  //play //////////////////////////////////////////\n  play() {\n    this.audio.play();\n  }\n  //////////////////////pause //////////////////////////\n  pause() {\n    this.audio.pause();\n  }\n  getAudio() {\n    // offset, limit, sort_col, sort_order\n    // let params = new HttpParams();\n    //   params = params.set(\"offset\", offset);\n    //   params = params.set(\"limit\", limit);\n    //   params = params.set(\"sort_col\", sort_col);\n    //   params = params.set(\"sort_order\", sort_order);\n    this.http.get('http://localhost:3000/test/get-audio' + '/' + this.userId).subscribe(res => {\n      console.log('GET SONG>>>>>>', res);\n      this.files = res;\n      console.log('FILES>>>>>', this.files);\n    });\n  }\n  deleteSong(data) {\n    this.http.delete('http://localhost:3000/test/delete-audio' + '/' + data.id).subscribe(res => {\n      console.log('GET SONG>>>>>>', res);\n      this.getAudio();\n    });\n  }\n  editSong(data) {\n    this.editId = sessionStorage.setItem('editId', data.id);\n    this.editUserId = sessionStorage.setItem('editUserId', data.userId);\n    this.files.filter(d => {\n      this.showUpdate = false;\n      this.showadd = true;\n      if (data.id == d.id) {\n        this.updateForm.patchValue({\n          editname: data.name,\n          editdesc: data.desc\n        });\n      }\n    });\n  }\n  updateSong() {\n    alert(this.updateForm.value.editname);\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    // formData.append('image',this.songFile)\n    this.updateid = sessionStorage.getItem('editId');\n    this.updateUserId = sessionStorage.getItem('editUserId');\n    if (this.updateForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.updateForm.value.editname);\n      params = params.set('desc', this.updateForm.value.editdesc);\n      params = params.set('image', this.saveImage);\n      params = params.set('id', this.updateid);\n      params = params.set('userId', this.updateUserId);\n      this.http.patch('http://localhost:3000/test/update-audio?' + params, formData).subscribe(res => {\n        console.log('GET SONG>>>>>>', res);\n        this.getAudio();\n      });\n    }\n  }\n}\nAudiosComponent.ɵfac = function AudiosComponent_Factory(t) {\n  return new (t || AudiosComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient));\n};\nAudiosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AudiosComponent,\n  selectors: [[\"app-audios\"]],\n  decls: 2,\n  vars: 0,\n  consts: [[\"song\", \"\"], [1, \"table\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [2, \"margin-left\", \"30%\", 3, \"hidden\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"placeholder\", \"name\", \"formControlName\", \"name\"], [\"type\", \"text\", \"placeholder\", \"des\", \"formControlName\", \"desc\"], [\"type\", \"file\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"hidden\"], [\"type\", \"text\", \"placeholder\", \"name\", \"formControlName\", \"editname\"], [\"type\", \"text\", \"placeholder\", \"des\", \"formControlName\", \"editdesc\"], [\"scope\", \"row\"], [2, \"height\", \"50px\", \"width\", \"50px\", 3, \"src\"], [3, \"click\"]],\n  template: function AudiosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AudiosComponent_ng_template_0_Template, 62, 6, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    }\n  },\n  dependencies: [i3.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","Validators","i0","AudiosComponent","constructor","formBuilder","http","Audio","sessionStorage","getItem","userId","ngOnInit","getAudio","addForm","group","name","required","desc","updateForm","editname","editdesc","dataValue","console","log","uaer","selectFile","event","file","target","files","songFile","selectImage","image","type","imageFile","addimage","imagePath","setItem","alert","formData","FormData","append","post","subscribe","res","saveImage","path","addsong","valid","params","set","value","song","fileplay","url","audio","src","load","play","pause","get","deleteSong","data","delete","id","editSong","editId","editUserId","filter","d","showUpdate","showadd","patchValue","updateSong","updateid","updateUserId","patch","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Ritik Porwal\\Desktop\\Xcel Practical\\Practical\\src\\app\\audios\\audios.component.ts","C:\\Users\\Ritik Porwal\\Desktop\\Xcel Practical\\Practical\\src\\app\\audios\\audios.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport {\n  FormBuilder,\n  FormGroup,\n  Validators,\n  FormControl,\n} from '@angular/forms';\n\ndeclare const $: any;\n\n@Component({\n  selector: 'app-audios',\n  templateUrl: './audios.component.html',\n  styleUrls: ['./audios.component.css'],\n})\nexport class AudiosComponent {\n  // files: { name: string; url: string; desc:string,image:string}[]=[];\n  songFile: any;\n  imageFile: any;\n  userId: any;\n  files: any = [];\n\n  addForm!: FormGroup<any>;\n  updateForm!: FormGroup<any>;\n  registerForm!: FormGroup<any>;\n  showUpdate: boolean = true;\n  showadd: boolean = false;\n  updateUserId: any;\n  updateid: any;\n  editUserId: any;\n  editId: any;\n  imagePath: any;\n  saveImage: any;\n\n  constructor(private formBuilder: FormBuilder, private http: HttpClient) {\n    if (sessionStorage.getItem('userId') != null) {\n      this.userId = sessionStorage.getItem('userId');\n    } else {\n      this.userId = '0';\n    }\n  }\n\n  title = 'Song.mp3';\n  dataValue: any = '0';\n  ngOnInit() {\n    this.getAudio();\n    this.addForm = this.formBuilder.group({\n      name: ['', [Validators.required]],\n      desc: ['', [Validators.required]],\n    });\n    this.updateForm = this.formBuilder.group({\n      editname: ['', [Validators.required]],\n      editdesc: ['', [Validators.required]],\n    });\n    if (sessionStorage.getItem('dataValue') != null) {\n      this.dataValue = sessionStorage.getItem('dataValue');\n    }\n    console.log(sessionStorage.getItem('dataValue'));\n\n    let userId = sessionStorage.getItem('userId');\n    let uaer = sessionStorage.getItem('user');\n  }\n  ////////////////////////////select file ////////////////////////\n  selectFile(event: any) {\n    const file = event.target.files[0];\n    this.songFile = file;\n    // console.log(\"this.songFile>>>>>>\",this.songFile)\n  }\n  ////////////////////////////select Image ////////////////////////\n  selectImage(event: any) {\n    const image = event.target.files[0];\n    if (image.type == 'image/jpeg') {\n      this.imageFile = image;\n      this.addimage();\n    } else {\n      this.imagePath = sessionStorage.setItem('imagePath', 'No Path');\n    }\n\n    console.log('this.selectImage>>>>>>', this.imageFile);\n  }\n  addimage() {\n    alert('add image');\n    const formData = new FormData();\n    formData.append('file', this.imageFile);\n    this.http\n      .post('http://localhost:3000/test/image', formData)\n      .subscribe((res: any) => {\n        console.log('RESSSSSSSSSS', res);\n        this.saveImage = res.path;\n        this.imagePath = sessionStorage.setItem('imagePath', res.path);\n      });\n  }\n  addsong() {\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    // formData.append('image',this.songFile)\n\n    if (this.addForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.addForm.value.name);\n      params = params.set('desc', this.addForm.value.desc);\n      params = params.set('image', this.saveImage);\n      params = params.set('userId', this.userId);\n      this.http\n        .post('http://localhost:3000/test/audio?' + params, formData)\n        .subscribe((res: any) => {\n          console.log('RESSSSSSSS>>>>>', res);\n          let path = res.song;\n          console.log('RESSSSSSSS>>>>>', path);\n          this.getAudio();\n          // src=\"\n          // this.files=[{name:res.filename,url:`http://localhost:3000/${{path}}` ,desc:\"\",image:\"\"},\n          //   {name:\"song 2\",url:\"../assets/song2.mp3\",desc:\"\",image:\"\"},\n          //   {name:\"song 3\",url:\"../assets/song3.mp3\",desc:\"\",image:\"\"},\n          //   {name:\"song 4\",url:\"../assets/song4.mp3\",desc:\"\",image:\"\"},\n          //   {name:\"song 5\",url:\"../assets/song5.mp3\",desc:\"\",image:\"\"},\n          //   {name:\"song 6\",url:\"../assets/song6.mp3\",desc:\"\",image:\"\"},\n          //   ]\n        });\n    } else {\n      console.log('Unvalid', this.addForm);\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////\n  audio = new Audio();\n\n  fileplay(file: any) {\n    let url = file.song;\n\n    this.audio.src = 'http://localhost:3000/' + url;\n    this.audio.load();\n    this.audio.play();\n  }\n  //play //////////////////////////////////////////\n  play() {\n    this.audio.play();\n  }\n\n  //////////////////////pause //////////////////////////\n  pause() {\n    this.audio.pause();\n  }\n\n  getAudio() {\n    // offset, limit, sort_col, sort_order\n    // let params = new HttpParams();\n    //   params = params.set(\"offset\", offset);\n    //   params = params.set(\"limit\", limit);\n    //   params = params.set(\"sort_col\", sort_col);\n    //   params = params.set(\"sort_order\", sort_order);\n    this.http\n      .get('http://localhost:3000/test/get-audio' + '/' + this.userId)\n      .subscribe((res: any) => {\n        console.log('GET SONG>>>>>>', res);\n        this.files = res;\n        console.log('FILES>>>>>', this.files);\n      });\n  }\n\n  deleteSong(data: any) {\n    this.http\n      .delete('http://localhost:3000/test/delete-audio' + '/' + data.id)\n      .subscribe((res: any) => {\n        console.log('GET SONG>>>>>>', res);\n        this.getAudio();\n      });\n  }\n  editSong(data: any) {\n    this.editId = sessionStorage.setItem('editId', data.id);\n    this.editUserId = sessionStorage.setItem('editUserId', data.userId);\n    this.files.filter((d: any) => {\n      this.showUpdate = false;\n      this.showadd = true;\n      if (data.id == d.id) {\n        this.updateForm.patchValue({\n          editname: data.name,\n          editdesc: data.desc,\n        });\n      }\n    });\n  }\n\n  updateSong() {\n    alert(this.updateForm.value.editname);\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    // formData.append('image',this.songFile)\n    this.updateid = sessionStorage.getItem('editId');\n    this.updateUserId = sessionStorage.getItem('editUserId');\n    if (this.updateForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.updateForm.value.editname);\n      params = params.set('desc', this.updateForm.value.editdesc);\n      params = params.set('image', this.saveImage);\n      params = params.set('id', this.updateid);\n      params = params.set('userId', this.updateUserId);\n\n      this.http\n        .patch('http://localhost:3000/test/update-audio?' + params, formData)\n        .subscribe((res: any) => {\n          console.log('GET SONG>>>>>>', res);\n          this.getAudio();\n        });\n    }\n  }\n}\n///////////////////////////////////////////////////////////////////////\n// path=\"http://localhost:3000/uploads\\\\Heroine(PagalWorld.com.se).mp3\"\n","<!-- <app-admin *ngIf=\"dataValue=='0';else song\"></app-admin> -->\n\n<ng-template #song>\n  <h1>Music Player</h1>\n\n  <!-- ///////////////////////////////////table ///////////////////// -->\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\"></th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Desc</th>\n        <th scope=\"col\">image</th>\n        <th scope=\"col\">Action</th>\n        <th scope=\"col\">Action</th>\n        <th scope=\"col\">Action</th>\n        <th scope=\"col\">Action</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let file of files\">\n        <th scope=\"row\"></th>\n        <td>{{ file.name }}</td>\n        <td>{{ file.desc }}</td>\n        <td>\n          <img\n            src=\"http://localhost:3000/{{ file.image }}\"\n            style=\"height: 50px; width: 50px\"\n          />\n        </td>\n        <td><button (click)=\"fileplay(file)\">Play Song</button></td>\n        <td><button (click)=\"pause()\">Pause</button></td>\n        <td><button (click)=\"deleteSong(file)\">Delete</button></td>\n        <td><button (click)=\"editSong(file)\">Update</button></td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- <mat-paginator [length]=\"100\"\n  [pageSize]=\"10\"\n  [pageSizeOptions]=\"[5, 10, 25, 100]\"\n  aria-label=\"Select page\">\n</mat-paginator> -->\n\n  <!-- //////////////////////listing /////////////////\n<ul *ngFor=\"let file of files\"  >\n    <li >{{file.name}}<button (click)=\"fileplay(file)\">Play Song</button>\n        <button (click)=\"pause()\">Pause</button>\n        <button (click)=\"deleteSong(file)\">Delete</button>\n        <button (click)=\"updateSong(file)\">Update</button>\n     </li>\n</ul> -->\n\n  <div style=\"margin-left: 30%\" [hidden]=\"showadd\">\n    <div>\n      <h1>Add Song</h1>\n    </div>\n    <form [formGroup]=\"addForm\" (ngSubmit)=\"addsong()\">\n      <input\n        type=\"text\"\n        placeholder=\"name\"\n        formControlName=\"name\"\n      /><br /><br />\n      <textarea type=\"text\" placeholder=\"des\" formControlName=\"desc\"></textarea\n      ><br /><br />\n      <input type=\"file\" (change)=\"selectImage($event)\" /><br /><br />\n      <input type=\"file\" (change)=\"selectFile($event)\" /><br /><br />\n      <button type=\"submit\" class=\"btn btn-primary\">Add Song</button>\n      <button [hidden]=\"showUpdate\" type=\"submit\" class=\"btn btn-primary\">\n        Update\n      </button>\n    </form>\n  </div>\n  <div style=\"margin-left: 30%\" [hidden]=\"showUpdate\">\n    <div>\n      <h1>Update Song</h1>\n    </div>\n    <form [formGroup]=\"updateForm\" (ngSubmit)=\"updateSong()\">\n      <input\n        type=\"text\"\n        placeholder=\"name\"\n        formControlName=\"editname\"\n      /><br /><br />\n      <textarea\n        type=\"text\"\n        placeholder=\"des\"\n        formControlName=\"editdesc\"\n      ></textarea\n      ><br /><br />\n      <input type=\"file\" (change)=\"selectImage($event)\" /><br /><br />\n      <input type=\"file\" (change)=\"selectFile($event)\" /><br /><br />\n\n      <button type=\"submit\" class=\"btn btn-primary\">Update</button>\n    </form>\n  </div>\n\n  <!-- <h1>UPLOAD</h1>\n<div> \n    <input type=\"file\"  (change)=\"selectFile($event)\" />\n    <button (click)=\"submit()\">Submit</button>\n</div> -->\n</ng-template>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}