{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../login/login.component\";\nfunction AudiosComponent_app_login_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-login\");\n  }\n}\nfunction AudiosComponent_ng_template_1_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 16);\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵelement(7, \"img\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_1_tr_21_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const file_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.fileplay(file_r4));\n    });\n    i0.ɵɵtext(10, \" hghggy\");\n    i0.ɵɵelement(11, \"i\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_1_tr_21_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.pause());\n    });\n    i0.ɵɵelement(14, \"i\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_1_tr_21_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const file_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.deleteSong(file_r4));\n    });\n    i0.ɵɵelement(17, \"i\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"td\")(19, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function AudiosComponent_ng_template_1_tr_21_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const file_r4 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.editSong(file_r4));\n    });\n    i0.ɵɵelement(20, \"i\", 22);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const file_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(file_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(file_r4.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://localhost:8443/\", file_r4.image, \"\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AudiosComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1, \"Audio List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"table\", 2)(3, \"thead\")(4, \"tr\");\n    i0.ɵɵelement(5, \"th\", 3);\n    i0.ɵɵelementStart(6, \"th\", 3);\n    i0.ɵɵtext(7, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 3);\n    i0.ɵɵtext(9, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 3);\n    i0.ɵɵtext(11, \"Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 3);\n    i0.ɵɵtext(13, \"Play\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 3);\n    i0.ɵɵtext(15, \"Pause\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\", 3);\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 3);\n    i0.ɵɵtext(19, \"Update\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, AudiosComponent_ng_template_1_tr_21_Template, 21, 3, \"tr\", 4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 5)(23, \"div\")(24, \"h1\");\n    i0.ɵɵtext(25, \"Add new song\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function AudiosComponent_ng_template_1_Template_form_ngSubmit_26_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.addsong());\n    });\n    i0.ɵɵelement(27, \"input\", 7)(28, \"br\")(29, \"br\")(30, \"textarea\", 8)(31, \"br\")(32, \"br\");\n    i0.ɵɵelementStart(33, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_1_Template_input_change_33_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.selectImage($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(34, \"i\", 10)(35, \"br\")(36, \"br\");\n    i0.ɵɵelementStart(37, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_1_Template_input_change_37_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.selectFile($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(38, \"i\", 11)(39, \"br\")(40, \"br\");\n    i0.ɵɵelementStart(41, \"button\", 12);\n    i0.ɵɵtext(42, \"Add Song\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"button\", 13);\n    i0.ɵɵtext(44, \" Update \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(45, \"div\", 5)(46, \"div\")(47, \"h1\");\n    i0.ɵɵtext(48, \"Update Song\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(49, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function AudiosComponent_ng_template_1_Template_form_ngSubmit_49_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.updateSong());\n    });\n    i0.ɵɵelement(50, \"input\", 14)(51, \"br\")(52, \"br\")(53, \"textarea\", 15)(54, \"br\")(55, \"br\");\n    i0.ɵɵelementStart(56, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_1_Template_input_change_56_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.selectImage($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(57, \"i\", 10)(58, \"br\")(59, \"br\");\n    i0.ɵɵelementStart(60, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function AudiosComponent_ng_template_1_Template_input_change_60_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.selectFile($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(61, \"i\", 11)(62, \"br\")(63, \"br\");\n    i0.ɵɵelementStart(64, \"button\", 12);\n    i0.ɵɵtext(65, \"Update\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.files);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", ctx_r2.showaddButton);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.addForm);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"hidden\", ctx_r2.showUpdateButton);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r2.showUpdateButton);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.updateForm);\n  }\n}\nexport class AudiosComponent {\n  constructor(formBuilder, http) {\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.files = [];\n    this.showUpdateButton = true;\n    this.showaddButton = false;\n    this.title = 'Song.mp3';\n    this.dataValue = '0';\n    //////////////////////////////////////////////////////////////////////////\n    this.audio = new Audio();\n    this.userName = sessionStorage.getItem('userName');\n  }\n  ngOnInit() {\n    this.getSongs();\n    this.addForm = this.formBuilder.group({\n      name: ['', [Validators.required]],\n      desc: ['', [Validators.required]]\n    });\n    this.updateForm = this.formBuilder.group({\n      editname: ['', [Validators.required]],\n      editdesc: ['', [Validators.required]]\n    });\n    if (sessionStorage.getItem('dataValue') != null) {\n      this.dataValue = sessionStorage.getItem('dataValue');\n    }\n    let userName = sessionStorage.getItem('userName');\n  }\n  ////File\n  selectFile(event) {\n    const file = event.target.files[0];\n    this.songFile = file;\n  }\n  ///////Image\n  selectImage(event) {\n    const image = event.target.files[0];\n    if (image.type == 'image/jpeg') {\n      this.imageFile = image;\n      this.addimage();\n    } else {\n      this.imagePath = sessionStorage.setItem('imagePath', 'No Path');\n    }\n  }\n  addimage() {\n    alert('add image');\n    const formData = new FormData();\n    formData.append('file', this.imageFile);\n    this.http.post('http://localhost:8443/api/image', formData).subscribe(res => {\n      this.saveImage = res.path;\n      this.imagePath = sessionStorage.setItem('imagePath', res.path);\n    });\n  }\n  addsong() {\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    if (this.addForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.addForm.value.name);\n      params = params.set('description', this.addForm.value.desc);\n      params = params.set('image', this.saveImage);\n      params = params.set('userName', this.userName);\n      this.http.post('http://localhost:8443/api/addAudio?' + params, formData).subscribe(res => {\n        let path = res.song;\n        this.getSongs();\n      });\n    } else {}\n  }\n  fileplay(file) {\n    alert('hhh');\n    let url = file.song;\n    alert(url);\n    this.audio.src = 'http://localhost:8443/' + url;\n    this.audio.load();\n    this.audio.play();\n  }\n  /////PLAY\n  play() {\n    alert('lll');\n    this.audio.play();\n  }\n  /////PAUSE\n  pause() {\n    this.audio.pause();\n  }\n  getSongs() {\n    this.http.get('http://localhost:8443/api/getaudioList' + '/' + this.userName).subscribe(res => {\n      this.files = res;\n    });\n  }\n  deleteSong(data) {\n    this.http.delete('http://localhost:8443/api/deleteAudio' + '/' + data.id).subscribe(res => {\n      this.getSongs();\n    });\n  }\n  editSong(data) {\n    this.editId = sessionStorage.setItem('editId', data.id);\n    this.edituserName = sessionStorage.setItem('edituserName', data.userName);\n    this.files.filter(d => {\n      this.showUpdateButton = false;\n      this.showaddButton = true;\n      if (data.id == d.id) {\n        this.updateForm.patchValue({\n          editname: data.name,\n          editdesc: data.description\n        });\n      }\n    });\n  }\n  updateSong() {\n    alert(this.updateForm.value.editname);\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    this.updateid = sessionStorage.getItem('editId');\n    this.updateUserName = sessionStorage.getItem('edituserName');\n    if (this.updateForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.updateForm.value.editname);\n      params = params.set('desc', this.updateForm.value.editdesc);\n      params = params.set('image', this.saveImage);\n      params = params.set('id', this.updateid);\n      params = params.set('userName', this.updateUserName);\n      this.http.patch('http://localhost:8443/api/updateAudio?' + params, formData).subscribe(res => {\n        this.getSongs();\n      });\n    }\n  }\n}\nAudiosComponent.ɵfac = function AudiosComponent_Factory(t) {\n  return new (t || AudiosComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient));\n};\nAudiosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AudiosComponent,\n  selectors: [[\"app-audios\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[4, \"ngIf\", \"ngIfElse\"], [\"song\", \"\"], [1, \"table\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [2, \"margin-left\", \"30%\", 3, \"hidden\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"placeholder\", \"Song title\", \"formControlName\", \"name\"], [\"type\", \"text\", \"placeholder\", \"Description\", \"formControlName\", \"desc\"], [\"type\", \"file\", 3, \"change\"], [1, \"fa\", \"fa-file\"], [1, \"fa\", \"fa-music\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"hidden\"], [\"type\", \"text\", \"placeholder\", \"Song title\", \"formControlName\", \"editname\"], [\"type\", \"text\", \"placeholder\", \"Description\", \"formControlName\", \"editdesc\"], [\"scope\", \"row\"], [2, \"height\", \"50px\", \"width\", \"50px\", 3, \"src\"], [3, \"click\"], [1, \"fa\", \"fa-play\"], [1, \"fa\", \"fa-pause\"], [1, \"fa\", \"fa-trash\"], [1, \"fa\", \"fa-pencil\"]],\n  template: function AudiosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AudiosComponent_app_login_0_Template, 1, 0, \"app-login\", 0);\n      i0.ɵɵtemplate(1, AudiosComponent_ng_template_1_Template, 66, 6, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.dataValue == \"0\")(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i4.LoginComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","Validators","i0","AudiosComponent","constructor","formBuilder","http","Audio","userName","sessionStorage","getItem","ngOnInit","getSongs","addForm","group","name","required","desc","updateForm","editname","editdesc","dataValue","selectFile","event","file","target","files","songFile","selectImage","image","type","imageFile","addimage","imagePath","setItem","alert","formData","FormData","append","post","subscribe","res","saveImage","path","addsong","valid","params","set","value","song","fileplay","url","audio","src","load","play","pause","get","deleteSong","data","delete","id","editSong","editId","edituserName","filter","d","showUpdateButton","showaddButton","patchValue","description","updateSong","updateid","updateUserName","patch","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Ritik Porwal\\Desktop\\Xcel Practical\\Practical\\src\\app\\audios\\audios.component.ts","C:\\Users\\Ritik Porwal\\Desktop\\Xcel Practical\\Practical\\src\\app\\audios\\audios.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport {\n  FormBuilder,\n  FormGroup,\n  Validators,\n  FormControl,\n} from '@angular/forms';\ndeclare const $: any;\n@Component({\n  selector: 'app-audios',\n  templateUrl: './audios.component.html',\n  styleUrls: ['./audios.component.css'],\n})\nexport class AudiosComponent {\n  songFile: any;\n  imageFile: any;\n  userName: any;\n  files: any = [];\n  addForm!: FormGroup<any>;\n  updateForm!: FormGroup<any>;\n  registerForm!: FormGroup<any>;\n  showUpdateButton: boolean = true;\n  showaddButton: boolean = false;\n  updateUserName: any;\n  updateid: any;\n  edituserName: any;\n  editId: any;\n  imagePath: any;\n  saveImage: any;\n\n  constructor(private formBuilder: FormBuilder, private http: HttpClient) {\n    this.userName = sessionStorage.getItem('userName');\n  }\n\n  title = 'Song.mp3';\n  dataValue: any = '0';\n  ngOnInit() {\n    this.getSongs();\n    this.addForm = this.formBuilder.group({\n      name: ['', [Validators.required]],\n      desc: ['', [Validators.required]],\n    });\n    this.updateForm = this.formBuilder.group({\n      editname: ['', [Validators.required]],\n      editdesc: ['', [Validators.required]],\n    });\n    if (sessionStorage.getItem('dataValue') != null) {\n      this.dataValue = sessionStorage.getItem('dataValue');\n    }\n\n    let userName = sessionStorage.getItem('userName');\n  }\n  ////File\n  selectFile(event: any) {\n    const file = event.target.files[0];\n    this.songFile = file;\n  }\n  ///////Image\n  selectImage(event: any) {\n    const image = event.target.files[0];\n    if (image.type == 'image/jpeg') {\n      this.imageFile = image;\n      this.addimage();\n    } else {\n      this.imagePath = sessionStorage.setItem('imagePath', 'No Path');\n    }\n  }\n  addimage() {\n    alert('add image');\n    const formData = new FormData();\n    formData.append('file', this.imageFile);\n    this.http\n      .post('http://localhost:8443/api/image', formData)\n      .subscribe((res: any) => {\n        this.saveImage = res.path;\n        this.imagePath = sessionStorage.setItem('imagePath', res.path);\n      });\n  }\n  addsong() {\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    if (this.addForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.addForm.value.name);\n      params = params.set('description', this.addForm.value.desc);\n      params = params.set('image', this.saveImage);\n      params = params.set('userName', this.userName);\n      this.http\n        .post('http://localhost:8443/api/addAudio?' + params, formData)\n        .subscribe((res: any) => {\n          let path = res.song;\n          this.getSongs();\n        });\n    } else {\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////\n  audio = new Audio();\n\n  fileplay(file: any) {\n    alert('hhh');\n    let url = file.song;\n    alert(url);\n\n    this.audio.src = 'http://localhost:8443/' + url;\n    this.audio.load();\n    this.audio.play();\n  }\n  /////PLAY\n  play() {\n    alert('lll');\n    this.audio.play();\n  }\n\n  /////PAUSE\n  pause() {\n    this.audio.pause();\n  }\n\n  getSongs() {\n    this.http\n      .get('http://localhost:8443/api/getaudioList' + '/' + this.userName)\n      .subscribe((res: any) => {\n        this.files = res;\n      });\n  }\n\n  deleteSong(data: any) {\n    this.http\n      .delete('http://localhost:8443/api/deleteAudio' + '/' + data.id)\n      .subscribe((res: any) => {\n        this.getSongs();\n      });\n  }\n  editSong(data: any) {\n    this.editId = sessionStorage.setItem('editId', data.id);\n    this.edituserName = sessionStorage.setItem('edituserName', data.userName);\n    this.files.filter((d: any) => {\n      this.showUpdateButton = false;\n      this.showaddButton = true;\n      if (data.id == d.id) {\n        this.updateForm.patchValue({\n          editname: data.name,\n          editdesc: data.description,\n        });\n      }\n    });\n  }\n\n  updateSong() {\n    alert(this.updateForm.value.editname);\n    const formData = new FormData();\n    formData.append('file', this.songFile);\n    this.updateid = sessionStorage.getItem('editId');\n    this.updateUserName = sessionStorage.getItem('edituserName');\n    if (this.updateForm.valid) {\n      let params = new HttpParams();\n      params = params.set('name', this.updateForm.value.editname);\n      params = params.set('desc', this.updateForm.value.editdesc);\n      params = params.set('image', this.saveImage);\n      params = params.set('id', this.updateid);\n      params = params.set('userName', this.updateUserName);\n\n      this.http\n        .patch('http://localhost:8443/api/updateAudio?' + params, formData)\n        .subscribe((res: any) => {\n          this.getSongs();\n        });\n    }\n  }\n}\n","<app-login *ngIf=\"dataValue == '0'; else song\"></app-login>\n\n<ng-template #song>\n  <h1>Audio List</h1>\n  <!-- /////////// -->\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\"></th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Description</th>\n        <th scope=\"col\">Image</th>\n        <th scope=\"col\">Play</th>\n        <th scope=\"col\">Pause</th>\n        <th scope=\"col\">Delete</th>\n        <th scope=\"col\">Update</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let file of files\">\n        <th scope=\"row\"></th>\n        <td>{{ file.name }}</td>\n        <td>{{ file.description }}</td>\n        <td>\n          <img\n            src=\"http://localhost:8443/{{ file.image }}\"\n            style=\"height: 50px; width: 50px\"\n          />\n        </td>\n        <td>\n          <button (click)=\"fileplay(file)\">\n            hghggy<i class=\"fa fa-play\"></i>\n          </button>\n        </td>\n        <td>\n          <button (click)=\"pause()\"><i class=\"fa fa-pause\"></i></button>\n        </td>\n        <td>\n          <button (click)=\"deleteSong(file)\">\n            <i class=\"fa fa-trash\"></i>\n          </button>\n        </td>\n        <td>\n          <button (click)=\"editSong(file)\"><i class=\"fa fa-pencil\"></i></button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <div style=\"margin-left: 30%\" [hidden]=\"showaddButton\">\n    <div>\n      <h1>Add new song</h1>\n    </div>\n    <form [formGroup]=\"addForm\" (ngSubmit)=\"addsong()\">\n      <input\n        type=\"text\"\n        placeholder=\"Song title\"\n        formControlName=\"name\"\n      /><br /><br />\n      <textarea\n        type=\"text\"\n        placeholder=\"Description\"\n        formControlName=\"desc\"\n      ></textarea\n      ><br /><br />\n      <input type=\"file\" (change)=\"selectImage($event)\" /><i\n        class=\"fa fa-file\"\n      ></i>\n      <br /><br />\n      <input type=\"file\" (change)=\"selectFile($event)\" /><i\n        class=\"fa fa-music\"\n      ></i\n      ><br /><br />\n      <button type=\"submit\" class=\"btn btn-primary\">Add Song</button>\n      <button [hidden]=\"showUpdateButton\" type=\"submit\" class=\"btn btn-primary\">\n        Update\n      </button>\n    </form>\n  </div>\n  <div style=\"margin-left: 30%\" [hidden]=\"showUpdateButton\">\n    <div>\n      <h1>Update Song</h1>\n    </div>\n    <form [formGroup]=\"updateForm\" (ngSubmit)=\"updateSong()\">\n      <input\n        type=\"text\"\n        placeholder=\"Song title\"\n        formControlName=\"editname\"\n      /><br /><br />\n      <textarea\n        type=\"text\"\n        placeholder=\"Description\"\n        formControlName=\"editdesc\"\n      ></textarea\n      ><br /><br />\n      <input type=\"file\" (change)=\"selectImage($event)\" />\n      <i class=\"fa fa-file\"></i><br /><br />\n      <input type=\"file\" (change)=\"selectFile($event)\" /><i\n        class=\"fa fa-music\"\n      ></i\n      ><br /><br />\n\n      <button type=\"submit\" class=\"btn btn-primary\">Update</button>\n    </form>\n  </div>\n</ng-template>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}